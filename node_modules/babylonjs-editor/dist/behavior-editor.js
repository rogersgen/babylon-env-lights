!function(e){function t(e){Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[v][e]}})}function r(e){if("undefined"!=typeof System&&System.isModule?System.isModule(e):"[object Module]"===Object.prototype.toString.call(e))return e;var t={default:e,__useDefault:e};if(e&&e.__esModule)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return new o(t)}function o(e){Object.defineProperty(this,v,{value:e}),Object.keys(e).forEach(t,this)}function n(e){return"@node/"===e.substr(0,6)?c(e,r(m(e.substr(6))),{}):p[e]}function u(e){var t=n(e);if(!t)throw new Error('Module "'+e+'" expected, but not contained in build.');if(t.module)return t.module;var r=t.linkRecord;return i(t,r),a(t,r,[]),t.module}function i(e,t){if(!t.depLoads){t.declare&&d(e,t),t.depLoads=[];for(var r=0;r<t.deps.length;r++){var o=n(t.deps[r]);t.depLoads.push(o),o.linkRecord&&i(o,o.linkRecord);var u=t.setters&&t.setters[r];u&&(u(o.module||o.linkRecord.moduleObj),o.importerSetters.push(u))}return e}}function d(t,r){var o=r.moduleObj,n=t.importerSetters,u=!1,i=r.declare.call(e,function(e,t){if(!u){if("object"==typeof e)for(var r in e)"__useDefault"!==r&&(o[r]=e[r]);else o[e]=t;u=!0;for(var i=0;i<n.length;i++)n[i](o);return u=!1,t}},{id:t.key});"function"!=typeof i?(r.setters=i.setters,r.execute=i.execute):(r.setters=[],r.execute=i)}function l(e,t,r){return p[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:r,setters:void 0,execute:void 0,moduleObj:{}}}}function f(e,t,r,o){var n={};return p[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:void 0,execute:o,executingRequire:r,moduleObj:{default:n,__useDefault:n},setters:void 0}}}function s(e,t,r){return function(o){for(var n=0;n<e.length;n++)if(e[n]===o){var u,i=t[n],d=i.linkRecord;return u=d?-1===r.indexOf(i)?a(i,d,r):d.moduleObj:i.module,"__useDefault"in u?u.__useDefault:u}}}function a(t,r,n){if(n.push(t),t.module)return t.module;if(r.setters){for(var i=0;i<r.deps.length;i++){var d=r.depLoads[i],l=d.linkRecord;l&&-1===n.indexOf(d)&&a(d,l,l.setters?n:[])}r.execute.call(y)}else{var f={id:t.key},c=r.moduleObj;Object.defineProperty(f,"exports",{configurable:!0,set:function(e){c.default=c.__useDefault=e},get:function(){return c.__useDefault}});var p=s(r.deps,r.depLoads,n);if(!r.executingRequire)for(var i=0;i<r.deps.length;i++)p(r.deps[i]);var v=r.execute.call(e,p,c.__useDefault,f);void 0!==v?c.default=c.__useDefault=v:f.exports!==c.__useDefault&&(c.default=c.__useDefault=f.exports);var m=c.__useDefault;if(m&&m.__esModule)for(var b in m)Object.hasOwnProperty.call(m,b)&&(c[b]=m[b])}var f=t.module=new o(r.moduleObj);if(!r.setters)for(var i=0;i<t.importerSetters.length;i++)t.importerSetters[i](f);return f}function c(e,t){return p[e]={key:e,module:t,importerSetters:[],linkRecord:void 0}}var p={},v="undefined"!=typeof Symbol?Symbol():"@@baseObject";o.prototype=Object.create(null),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(o.prototype[Symbol.toStringTag]="Module");var m="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&void 0!==require.resolve&&"undefined"!=typeof process&&process.platform&&require,y={};return Object.freeze&&Object.freeze(y),function(e,t,n,i){return function(d){d(function(d){var s={_nodeRequire:m,register:l,registerDynamic:f,registry:{get:function(e){return p[e].module},set:c},newModule:function(e){return new o(e)}};c("@empty",new o({}));for(var a=0;a<t.length;a++)c(t[a],r(arguments[a],{}));i(s);var v=u(e[0]);if(e.length>1)for(var a=1;a<e.length;a++)u(e[a]);return n?v.__useDefault:(v instanceof o&&Object.defineProperty(v,"__esModule",{value:!0}),v)})}}}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this)(["a"],["d","1a","14","13","12","11","15","16","e"],!0,function($__System){var require=this.require,exports=this.exports,module=this.module;$__System.registerDynamic("b",[],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var TokenType;!function(TokenType){TokenType[TokenType.IDENTIFIER=0]="IDENTIFIER",TokenType[TokenType.PARENTHESIS=1]="PARENTHESIS",TokenType[TokenType.COMMA=2]="COMMA",TokenType[TokenType.UNKNOWN=3]="UNKNOWN",TokenType[TokenType.END_OF_INPUT=4]="END_OF_INPUT"}(TokenType=exports.TokenType||(exports.TokenType={}));var Tokenizer=function(){function Tokenizer(toParse){this.identifier="",this.token=TokenType.UNKNOWN,this._pos=0,this._isLetterOrDigitPattern=/^[a-zA-Z0-9]+$/,this.toParse=toParse,this._maxPos=toParse.length,this.getNextToken()}return Tokenizer.prototype.read=function(){return this.toParse[this._pos++]},Tokenizer.prototype.peek=function(){return this.toParse[this._pos]},Tokenizer.prototype.forward=function(){this._pos++},Tokenizer.prototype.isEnd=function(){return this._pos>=this._maxPos},Tokenizer.prototype.match=function(token){return this.token===token&&(this.getNextToken(),!0)},Tokenizer.prototype.matchIdentifier=function(expected){return this.identifier===expected&&(this.getNextToken(),!0)},Tokenizer.prototype.getNextToken=function(){if(this.isEnd())return this.token=TokenType.END_OF_INPUT;for(var c=" ";" "===(c=this.read())||"\t"===c;)if(this.isEnd())return this.token=TokenType.END_OF_INPUT;switch(c){case"(":case")":return this.token=TokenType.PARENTHESIS;case",":return this.token=TokenType.COMMA;default:if("_"===c||this._isLetterOrDigitPattern.test(c)){for(this.token=TokenType.IDENTIFIER,this.identifier=c;!this.isEnd()&&(this._isLetterOrDigitPattern.test(c=this.peek())||"_"===c||"."===c);)this.identifier+=c,this.forward();return this.token=TokenType.IDENTIFIER}}return this.token=TokenType.UNKNOWN},Tokenizer}();exports.default=Tokenizer}),$__System.registerDynamic("c",["d","e"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var babylonjs_1=$__require("d"),extensions_1=$__require("e"),Tools=function(){function Tools(){}return Tools.prototype.getCustomMaterial=function(name){var ext=extensions_1.default.Instances.MaterialCreatorExtension;return ext?ext.instances[name]:null},Tools.prototype.getCustomScript=function(object,name){var ext=extensions_1.default.Instances.BehaviorExtension;return ext?"string"===(typeof object).toLowerCase()?ext.instances[object+name]:object instanceof babylonjs_1.Scene?ext.instances["scene"+name]:object instanceof babylonjs_1.ParticleSystem?ext.instances[object.id+name]:ext.instances[object.name+name]:null},Tools.prototype.getConstructor=function(name){var ext=extensions_1.default.Instances.BehaviorExtension;return ext?ext.scriptsConstructors[name]:null},Tools.prototype.getCustomPostProcess=function(name){var ext=extensions_1.default.Instances.PostProcessCreatorExtension;return ext?ext.instances[name]:null},Tools.prototype.getFileByName=function(name){return babylonjs_1.FilesInputStore.FilesToLoad[name]},Tools.prototype.getFileUrl=function(filename,oneTimeOnly){return void 0===oneTimeOnly&&(oneTimeOnly=!0),extensions_1.default.RoolUrl&&"file:"!==extensions_1.default.RoolUrl?extensions_1.default.RoolUrl+filename:URL.createObjectURL(this.getFileByName(filename))},Tools.prototype.getPathFinder=function(name){var ext=extensions_1.default.Instances.PathFinderExtension;return ext?ext.instances[name]:null},Tools.prototype.instantiatePrefab=function(name){return extensions_1.default.Instances.AssetsExtension.instantiatePrefab(name)},Tools.prototype.instantiateParticleSystemSet=function(name,position){return extensions_1.default.Instances.AssetsExtension.instantiateParticleSystemsSet(name,position)},Tools.prototype.sendMessage=function(object,methodName){for(var params=[],_i=2;_i<arguments.length;_i++)params[_i-2]=arguments[_i];var ext=extensions_1.default.Instances.BehaviorExtension;if(!ext)return null;var scripts=ext.objectsInstances[object instanceof babylonjs_1.Scene?"Scene":object.id];scripts&&scripts.forEach(function(s){return s[methodName]&&s[methodName].apply(s,params)})},Tools}();exports.default=Tools;var exportScriptBodyString="\n    if (!params) {\n        returnValue = value;\n    } else {\n        returnValue = {\n            ctor: value\n        };\n\n        var keys = Object.keys(params);\n        for (var i = 0; i < keys.length; i++) {\n            returnValue[keys[i]] = params[keys[i]];\n        }\n    }\n".replace(/\n/g,"").replace(/\t/g,"").replace(/  /g,""),exportScriptReturnString="\nif (returnValue) {return returnValue;}\nif (exports) {return exports;}\n".replace(/\n/g,"").replace(/\t/g,"").replace(/  /g,"");exports.exportScriptString="\nfunction exportScript (value, params) {"+exportScriptBodyString+"};\n"+exportScriptReturnString+"\n"}),function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("babylonjs")):$__System.registerDynamic("f",["d"],!1,function($__require,$__exports,$__module){return factory.call(this,$__require("d"))})}("undefined"!=typeof self?self:"undefined"!=typeof global&&global,function(__WEBPACK_EXTERNAL_MODULE_babylonjs_Misc_decorators__){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s="./legacy/legacy.ts")}({"../../node_modules/tslib/tslib.es6.js":function(module,__webpack_exports__,__webpack_require__){"use strict";function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function __exportStar(m,exports){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var m="function"==typeof Symbol&&o[Symbol.iterator],i=0;return m?m.call(o):{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}}}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})})}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i}function __asyncDelegator(o){function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i}function __asyncValues(o){function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value)})}}function settle(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o="function"==typeof __values?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i)}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__extends",function(){return __extends}),__webpack_require__.d(__webpack_exports__,"__assign",function(){return __assign}),__webpack_require__.d(__webpack_exports__,"__rest",function(){return __rest}),__webpack_require__.d(__webpack_exports__,"__decorate",function(){return __decorate}),__webpack_require__.d(__webpack_exports__,"__param",function(){return __param}),__webpack_require__.d(__webpack_exports__,"__metadata",function(){return __metadata}),__webpack_require__.d(__webpack_exports__,"__awaiter",function(){return __awaiter}),__webpack_require__.d(__webpack_exports__,"__generator",function(){return __generator}),__webpack_require__.d(__webpack_exports__,"__exportStar",function(){return __exportStar}),__webpack_require__.d(__webpack_exports__,"__values",function(){return __values}),__webpack_require__.d(__webpack_exports__,"__read",function(){return __read}),__webpack_require__.d(__webpack_exports__,"__spread",function(){return __spread}),__webpack_require__.d(__webpack_exports__,"__spreadArrays",function(){return __spreadArrays}),__webpack_require__.d(__webpack_exports__,"__await",function(){return __await}),__webpack_require__.d(__webpack_exports__,"__asyncGenerator",function(){return __asyncGenerator}),__webpack_require__.d(__webpack_exports__,"__asyncDelegator",function(){return __asyncDelegator}),__webpack_require__.d(__webpack_exports__,"__asyncValues",function(){return __asyncValues}),__webpack_require__.d(__webpack_exports__,"__makeTemplateObject",function(){return __makeTemplateObject}),__webpack_require__.d(__webpack_exports__,"__importStar",function(){return __importStar}),__webpack_require__.d(__webpack_exports__,"__importDefault",function(){return __importDefault});var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign.apply(this,arguments)}},"../../node_modules/webpack/buildin/global.js":function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},"./brick/brickProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"brickProceduralTexturePixelShader",function(){return brickProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="brickProceduralTexturePixelShader",shader="precision highp float;\nvarying vec2 vPosition;\nvarying vec2 vUV;\nuniform float numberOfBricksHeight;\nuniform float numberOfBricksWidth;\nuniform vec3 brickColor;\nuniform vec3 jointColor;\nfloat rand(vec2 n) {\nreturn fract(cos(dot(n,vec2(12.9898,4.1414)))*43758.5453);\n}\nfloat noise(vec2 n) {\nconst vec2 d=vec2(0.0,1.0);\nvec2 b=floor(n),f=smoothstep(vec2(0.0),vec2(1.0),fract(n));\nreturn mix(mix(rand(b),rand(b+d.yx),f.x),mix(rand(b+d.xy),rand(b+d.yy),f.x),f.y);\n}\nfloat fbm(vec2 n) {\nfloat total=0.0,amplitude=1.0;\nfor (int i=0; i<4; i++) {\ntotal+=noise(n)*amplitude;\nn+=n;\namplitude*=0.5;\n}\nreturn total;\n}\nfloat roundF(float number){\nreturn sign(number)*floor(abs(number)+0.5);\n}\nvoid main(void)\n{\nfloat brickW=1.0/numberOfBricksWidth;\nfloat brickH=1.0/numberOfBricksHeight;\nfloat jointWPercentage=0.01;\nfloat jointHPercentage=0.05;\nvec3 color=brickColor;\nfloat yi=vUV.y/brickH;\nfloat nyi=roundF(yi);\nfloat xi=vUV.x/brickW;\nif (mod(floor(yi),2.0) == 0.0){\nxi=xi-0.5;\n}\nfloat nxi=roundF(xi);\nvec2 brickvUV=vec2((xi-floor(xi))/brickH,(yi-floor(yi))/brickW);\nif (yi<nyi+jointHPercentage && yi>nyi-jointHPercentage){\ncolor=mix(jointColor,vec3(0.37,0.25,0.25),(yi-nyi)/jointHPercentage+0.2);\n}\nelse if (xi<nxi+jointWPercentage && xi>nxi-jointWPercentage){\ncolor=mix(jointColor,vec3(0.44,0.44,0.44),(xi-nxi)/jointWPercentage+0.2);\n}\nelse {\nfloat brickColorSwitch=mod(floor(yi)+floor(xi),3.0);\nif (brickColorSwitch == 0.0)\ncolor=mix(color,vec3(0.33,0.33,0.33),0.3);\nelse if (brickColorSwitch == 2.0)\ncolor=mix(color,vec3(0.11,0.11,0.11),0.3);\n}\ngl_FragColor=vec4(color,1.0);\n}";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var brickProceduralTexturePixelShader={name:name,shader:shader}},"./brick/brickProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"BrickProceduralTexture",function(){return BrickProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),BrickProceduralTexture=(__webpack_require__("./brick/brickProceduralTexture.fragment.ts"),function(_super){function BrickProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"brickProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this._numberOfBricksHeight=15,_this._numberOfBricksWidth=5,_this._jointColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.72,.72,.72),_this._brickColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.77,.47,.4),_this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(BrickProceduralTexture,_super),BrickProceduralTexture.prototype.updateShaderUniforms=function(){this.setFloat("numberOfBricksHeight",this._numberOfBricksHeight),this.setFloat("numberOfBricksWidth",this._numberOfBricksWidth),this.setColor3("brickColor",this._brickColor),this.setColor3("jointColor",this._jointColor)},Object.defineProperty(BrickProceduralTexture.prototype,"numberOfBricksHeight",{get:function(){return this._numberOfBricksHeight},set:function(value){this._numberOfBricksHeight=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(BrickProceduralTexture.prototype,"numberOfBricksWidth",{get:function(){return this._numberOfBricksWidth},set:function(value){this._numberOfBricksWidth=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(BrickProceduralTexture.prototype,"jointColor",{get:function(){return this._jointColor},set:function(value){this._jointColor=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(BrickProceduralTexture.prototype,"brickColor",{get:function(){return this._brickColor},set:function(value){this._brickColor=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),BrickProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));return serializationObject.customType="BABYLON.BrickProceduralTexture",serializationObject},BrickProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new BrickProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl)},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],BrickProceduralTexture.prototype,"numberOfBricksHeight",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],BrickProceduralTexture.prototype,"numberOfBricksWidth",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serializeAsColor3)()],BrickProceduralTexture.prototype,"jointColor",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serializeAsColor3)()],BrickProceduralTexture.prototype,"brickColor",null),BrickProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.BrickProceduralTexture"]=BrickProceduralTexture},"./brick/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _brickProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./brick/brickProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"BrickProceduralTexture",function(){return _brickProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.BrickProceduralTexture})},"./cloud/cloudProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"cloudProceduralTexturePixelShader",function(){return cloudProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="cloudProceduralTexturePixelShader",shader="precision highp float;\nvarying vec2 vUV;\nuniform vec4 skyColor;\nuniform vec4 cloudColor;\nfloat rand(vec2 n) {\nreturn fract(cos(dot(n,vec2(12.9898,4.1414)))*43758.5453);\n}\nfloat noise(vec2 n) {\nconst vec2 d=vec2(0.0,1.0);\nvec2 b=floor(n),f=smoothstep(vec2(0.0),vec2(1.0),fract(n));\nreturn mix(mix(rand(b),rand(b+d.yx),f.x),mix(rand(b+d.xy),rand(b+d.yy),f.x),f.y);\n}\nfloat fbm(vec2 n) {\nfloat total=0.0,amplitude=1.0;\nfor (int i=0; i<4; i++) {\ntotal+=noise(n)*amplitude;\nn+=n;\namplitude*=0.5;\n}\nreturn total;\n}\nvoid main() {\nvec2 p=vUV*12.0;\nvec4 c=mix(skyColor,cloudColor,fbm(p));\ngl_FragColor=c;\n}\n";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var cloudProceduralTexturePixelShader={name:name,shader:shader}},"./cloud/cloudProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CloudProceduralTexture",function(){return CloudProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),CloudProceduralTexture=(__webpack_require__("./cloud/cloudProceduralTexture.fragment.ts"),function(_super){function CloudProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"cloudProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this._skyColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color4(.15,.68,1,1),_this._cloudColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color4(1,1,1,1),_this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(CloudProceduralTexture,_super),CloudProceduralTexture.prototype.updateShaderUniforms=function(){this.setColor4("skyColor",this._skyColor),this.setColor4("cloudColor",this._cloudColor)},Object.defineProperty(CloudProceduralTexture.prototype,"skyColor",{get:function(){return this._skyColor},set:function(value){this._skyColor=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(CloudProceduralTexture.prototype,"cloudColor",{get:function(){return this._cloudColor},set:function(value){this._cloudColor=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),CloudProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));return serializationObject.customType="BABYLON.CloudProceduralTexture",serializationObject},CloudProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new CloudProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl)},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serializeAsColor4)()],CloudProceduralTexture.prototype,"skyColor",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serializeAsColor4)()],CloudProceduralTexture.prototype,"cloudColor",null),CloudProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.CloudProceduralTexture"]=CloudProceduralTexture},"./cloud/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _cloudProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./cloud/cloudProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"CloudProceduralTexture",function(){return _cloudProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.CloudProceduralTexture})},"./fire/fireProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"fireProceduralTexturePixelShader",function(){return fireProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="fireProceduralTexturePixelShader",shader="precision highp float;\nuniform float time;\nuniform vec3 c1;\nuniform vec3 c2;\nuniform vec3 c3;\nuniform vec3 c4;\nuniform vec3 c5;\nuniform vec3 c6;\nuniform vec2 speed;\nuniform float shift;\nuniform float alphaThreshold;\nvarying vec2 vUV;\nfloat rand(vec2 n) {\nreturn fract(cos(dot(n,vec2(12.9898,4.1414)))*43758.5453);\n}\nfloat noise(vec2 n) {\nconst vec2 d=vec2(0.0,1.0);\nvec2 b=floor(n),f=smoothstep(vec2(0.0),vec2(1.0),fract(n));\nreturn mix(mix(rand(b),rand(b+d.yx),f.x),mix(rand(b+d.xy),rand(b+d.yy),f.x),f.y);\n}\nfloat fbm(vec2 n) {\nfloat total=0.0,amplitude=1.0;\nfor (int i=0; i<4; i++) {\ntotal+=noise(n)*amplitude;\nn+=n;\namplitude*=0.5;\n}\nreturn total;\n}\nvoid main() {\nvec2 p=vUV*8.0;\nfloat q=fbm(p-time*0.1);\nvec2 r=vec2(fbm(p+q+time*speed.x-p.x-p.y),fbm(p+q-time*speed.y));\nvec3 c=mix(c1,c2,fbm(p+r))+mix(c3,c4,r.x)-mix(c5,c6,r.y);\nvec3 color=c*cos(shift*vUV.y);\nfloat luminance=dot(color.rgb,vec3(0.3,0.59,0.11));\ngl_FragColor=vec4(color,luminance*alphaThreshold+(1.0-alphaThreshold));\n}";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var fireProceduralTexturePixelShader={name:name,shader:shader}},"./fire/fireProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"FireProceduralTexture",function(){return FireProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),FireProceduralTexture=(__webpack_require__("./fire/fireProceduralTexture.fragment.ts"),function(_super){function FireProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"fireProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this._time=0,_this._speed=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Vector2(.5,.3),_this._autoGenerateTime=!0,_this._alphaThreshold=.5,_this._fireColors=FireProceduralTexture.RedFireColors,_this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(FireProceduralTexture,_super),FireProceduralTexture.prototype.updateShaderUniforms=function(){this.setFloat("time",this._time),this.setVector2("speed",this._speed),this.setColor3("c1",this._fireColors[0]),this.setColor3("c2",this._fireColors[1]),this.setColor3("c3",this._fireColors[2]),this.setColor3("c4",this._fireColors[3]),this.setColor3("c5",this._fireColors[4]),this.setColor3("c6",this._fireColors[5]),this.setFloat("alphaThreshold",this._alphaThreshold)},FireProceduralTexture.prototype.render=function(useCameraPostProcess){var scene=this.getScene();this._autoGenerateTime&&scene&&(this._time+=.03*scene.getAnimationRatio(),this.updateShaderUniforms()),_super.prototype.render.call(this,useCameraPostProcess)},Object.defineProperty(FireProceduralTexture,"PurpleFireColors",{get:function(){return[new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.5,0,1),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.9,0,1),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.2,0,1),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(1,.9,1),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.1,.1,1),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.9,.9,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(FireProceduralTexture,"GreenFireColors",{get:function(){return[new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.5,1,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.5,1,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.3,.4,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.5,1,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.2,0,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.5,1,0)]},enumerable:!0,configurable:!0}),Object.defineProperty(FireProceduralTexture,"RedFireColors",{get:function(){return[new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.5,0,.1),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.9,0,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.2,0,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(1,.9,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.1,.1,.1),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.9,.9,.9)]},enumerable:!0,configurable:!0}),Object.defineProperty(FireProceduralTexture,"BlueFireColors",{get:function(){return[new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.1,0,.5),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(0,0,.5),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.1,0,.2),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(0,0,1),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.1,.2,.3),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(0,.2,.9)]},enumerable:!0,configurable:!0}),Object.defineProperty(FireProceduralTexture.prototype,"autoGenerateTime",{get:function(){return this._autoGenerateTime},set:function(value){this._autoGenerateTime=value},enumerable:!0,configurable:!0}),Object.defineProperty(FireProceduralTexture.prototype,"fireColors",{get:function(){return this._fireColors},set:function(value){this._fireColors=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(FireProceduralTexture.prototype,"time",{get:function(){return this._time},set:function(value){this._time=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(FireProceduralTexture.prototype,"speed",{get:function(){return this._speed},set:function(value){this._speed=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(FireProceduralTexture.prototype,"alphaThreshold",{get:function(){return this._alphaThreshold},set:function(value){this._alphaThreshold=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),FireProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));serializationObject.customType="BABYLON.FireProceduralTexture",serializationObject.fireColors=[];for(var i=0;i<this._fireColors.length;i++)serializationObject.fireColors.push(this._fireColors[i].asArray());return serializationObject},FireProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){for(var texture=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new FireProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl),colors=[],i=0;i<parsedTexture.fireColors.length;i++)colors.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3.FromArray(parsedTexture.fireColors[i]));return texture.fireColors=colors,texture},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],FireProceduralTexture.prototype,"autoGenerateTime",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],FireProceduralTexture.prototype,"time",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serializeAsVector2)()],FireProceduralTexture.prototype,"speed",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],FireProceduralTexture.prototype,"alphaThreshold",null),FireProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.FireProceduralTexture"]=FireProceduralTexture},"./fire/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _fireProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./fire/fireProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"FireProceduralTexture",function(){return _fireProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.FireProceduralTexture})},"./grass/grassProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"grassProceduralTexturePixelShader",function(){return grassProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="grassProceduralTexturePixelShader",shader="precision highp float;\nvarying vec2 vPosition;\nvarying vec2 vUV;\nuniform vec3 herb1Color;\nuniform vec3 herb2Color;\nuniform vec3 herb3Color;\nuniform vec3 groundColor;\nfloat rand(vec2 n) {\nreturn fract(cos(dot(n,vec2(12.9898,4.1414)))*43758.5453);\n}\nfloat noise(vec2 n) {\nconst vec2 d=vec2(0.0,1.0);\nvec2 b=floor(n),f=smoothstep(vec2(0.0),vec2(1.0),fract(n));\nreturn mix(mix(rand(b),rand(b+d.yx),f.x),mix(rand(b+d.xy),rand(b+d.yy),f.x),f.y);\n}\nfloat fbm(vec2 n) {\nfloat total=0.0,amplitude=1.0;\nfor (int i=0; i<4; i++) {\ntotal+=noise(n)*amplitude;\nn+=n;\namplitude*=0.5;\n}\nreturn total;\n}\nvoid main(void) {\nvec3 color=mix(groundColor,herb1Color,rand(gl_FragCoord.xy*4.0));\ncolor=mix(color,herb2Color,rand(gl_FragCoord.xy*8.0));\ncolor=mix(color,herb3Color,rand(gl_FragCoord.xy));\ncolor=mix(color,herb1Color,fbm(gl_FragCoord.xy*16.0));\ngl_FragColor=vec4(color,1.0);\n}";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var grassProceduralTexturePixelShader={name:name,shader:shader}},"./grass/grassProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"GrassProceduralTexture",function(){return GrassProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),GrassProceduralTexture=(__webpack_require__("./grass/grassProceduralTexture.fragment.ts"),function(_super){function GrassProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"grassProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this._groundColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(1,1,1),_this._grassColors=[new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.29,.38,.02),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.36,.49,.09),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.51,.6,.28)],_this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(GrassProceduralTexture,_super),GrassProceduralTexture.prototype.updateShaderUniforms=function(){this.setColor3("herb1Color",this._grassColors[0]),this.setColor3("herb2Color",this._grassColors[1]),this.setColor3("herb3Color",this._grassColors[2]),this.setColor3("groundColor",this._groundColor)},Object.defineProperty(GrassProceduralTexture.prototype,"grassColors",{get:function(){return this._grassColors},set:function(value){this._grassColors=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(GrassProceduralTexture.prototype,"groundColor",{get:function(){return this._groundColor},set:function(value){this._groundColor=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),GrassProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));serializationObject.customType="BABYLON.GrassProceduralTexture",serializationObject.grassColors=[];for(var i=0;i<this._grassColors.length;i++)serializationObject.grassColors.push(this._grassColors[i].asArray());return serializationObject},GrassProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){for(var texture=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new GrassProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl),colors=[],i=0;i<parsedTexture.grassColors.length;i++)colors.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3.FromArray(parsedTexture.grassColors[i]));return texture.grassColors=colors,texture},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serializeAsColor3)()],GrassProceduralTexture.prototype,"groundColor",null),GrassProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.GrassProceduralTexture"]=GrassProceduralTexture},"./grass/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _grassProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./grass/grassProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"GrassProceduralTexture",function(){return _grassProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.GrassProceduralTexture})},"./index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _brick__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./brick/index.ts");__webpack_require__.d(__webpack_exports__,"BrickProceduralTexture",function(){return _brick__WEBPACK_IMPORTED_MODULE_0__.BrickProceduralTexture});var _cloud__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./cloud/index.ts");__webpack_require__.d(__webpack_exports__,"CloudProceduralTexture",function(){return _cloud__WEBPACK_IMPORTED_MODULE_1__.CloudProceduralTexture});var _fire__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./fire/index.ts");__webpack_require__.d(__webpack_exports__,"FireProceduralTexture",function(){return _fire__WEBPACK_IMPORTED_MODULE_2__.FireProceduralTexture});var _grass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./grass/index.ts");__webpack_require__.d(__webpack_exports__,"GrassProceduralTexture",function(){return _grass__WEBPACK_IMPORTED_MODULE_3__.GrassProceduralTexture});var _marble__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./marble/index.ts");__webpack_require__.d(__webpack_exports__,"MarbleProceduralTexture",function(){return _marble__WEBPACK_IMPORTED_MODULE_4__.MarbleProceduralTexture});var _normalMap__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./normalMap/index.ts");__webpack_require__.d(__webpack_exports__,"NormalMapProceduralTexture",function(){return _normalMap__WEBPACK_IMPORTED_MODULE_5__.NormalMapProceduralTexture});var _perlinNoise__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./perlinNoise/index.ts");__webpack_require__.d(__webpack_exports__,"PerlinNoiseProceduralTexture",function(){return _perlinNoise__WEBPACK_IMPORTED_MODULE_6__.PerlinNoiseProceduralTexture});var _road__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./road/index.ts");__webpack_require__.d(__webpack_exports__,"RoadProceduralTexture",function(){return _road__WEBPACK_IMPORTED_MODULE_7__.RoadProceduralTexture});var _starfield__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./starfield/index.ts");__webpack_require__.d(__webpack_exports__,"StarfieldProceduralTexture",function(){return _starfield__WEBPACK_IMPORTED_MODULE_8__.StarfieldProceduralTexture});var _wood__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./wood/index.ts");__webpack_require__.d(__webpack_exports__,"WoodProceduralTexture",function(){return _wood__WEBPACK_IMPORTED_MODULE_9__.WoodProceduralTexture})},"./legacy/legacy.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(global){var _index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./index.ts");__webpack_require__.d(__webpack_exports__,"BrickProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.BrickProceduralTexture}),__webpack_require__.d(__webpack_exports__,"CloudProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.CloudProceduralTexture}),__webpack_require__.d(__webpack_exports__,"FireProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.FireProceduralTexture}),__webpack_require__.d(__webpack_exports__,"GrassProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.GrassProceduralTexture}),__webpack_require__.d(__webpack_exports__,"MarbleProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.MarbleProceduralTexture}),__webpack_require__.d(__webpack_exports__,"NormalMapProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.NormalMapProceduralTexture}),__webpack_require__.d(__webpack_exports__,"PerlinNoiseProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.PerlinNoiseProceduralTexture}),__webpack_require__.d(__webpack_exports__,"RoadProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.RoadProceduralTexture}),__webpack_require__.d(__webpack_exports__,"StarfieldProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.StarfieldProceduralTexture}),__webpack_require__.d(__webpack_exports__,"WoodProceduralTexture",function(){return _index__WEBPACK_IMPORTED_MODULE_0__.WoodProceduralTexture});var globalObject=void 0!==global?global:"undefined"!=typeof window?window:void 0;if(void 0!==globalObject){globalObject.BABYLON=globalObject.BABYLON||{};for(var mat in _index__WEBPACK_IMPORTED_MODULE_0__)globalObject.BABYLON[mat]=_index__WEBPACK_IMPORTED_MODULE_0__[mat]}}.call(this,__webpack_require__("../../node_modules/webpack/buildin/global.js"))},"./marble/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _marbleProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./marble/marbleProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"MarbleProceduralTexture",function(){return _marbleProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.MarbleProceduralTexture})},"./marble/marbleProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"marbleProceduralTexturePixelShader",function(){return marbleProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="marbleProceduralTexturePixelShader",shader="precision highp float;\nvarying vec2 vPosition;\nvarying vec2 vUV;\nuniform float numberOfTilesHeight;\nuniform float numberOfTilesWidth;\nuniform float amplitude;\nuniform vec3 marbleColor;\nuniform vec3 jointColor;\nconst vec3 tileSize=vec3(1.1,1.0,1.1);\nconst vec3 tilePct=vec3(0.98,1.0,0.98);\nfloat rand(vec2 n) {\nreturn fract(cos(dot(n,vec2(12.9898,4.1414)))*43758.5453);\n}\nfloat noise(vec2 n) {\nconst vec2 d=vec2(0.0,1.0);\nvec2 b=floor(n),f=smoothstep(vec2(0.0),vec2(1.0),fract(n));\nreturn mix(mix(rand(b),rand(b+d.yx),f.x),mix(rand(b+d.xy),rand(b+d.yy),f.x),f.y);\n}\nfloat turbulence(vec2 P)\n{\nfloat val=0.0;\nfloat freq=1.0;\nfor (int i=0; i<4; i++)\n{\nval+=abs(noise(P*freq)/freq);\nfreq*=2.07;\n}\nreturn val;\n}\nfloat roundF(float number){\nreturn sign(number)*floor(abs(number)+0.5);\n}\nvec3 marble_color(float x)\n{\nvec3 col;\nx=0.5*(x+1.);\nx=sqrt(x);\nx=sqrt(x);\nx=sqrt(x);\ncol=vec3(.2+.75*x);\ncol.b*=0.95;\nreturn col;\n}\nvoid main()\n{\nfloat brickW=1.0/numberOfTilesWidth;\nfloat brickH=1.0/numberOfTilesHeight;\nfloat jointWPercentage=0.01;\nfloat jointHPercentage=0.01;\nvec3 color=marbleColor;\nfloat yi=vUV.y/brickH;\nfloat nyi=roundF(yi);\nfloat xi=vUV.x/brickW;\nif (mod(floor(yi),2.0) == 0.0){\nxi=xi-0.5;\n}\nfloat nxi=roundF(xi);\nvec2 brickvUV=vec2((xi-floor(xi))/brickH,(yi-floor(yi))/brickW);\nif (yi<nyi+jointHPercentage && yi>nyi-jointHPercentage){\ncolor=mix(jointColor,vec3(0.37,0.25,0.25),(yi-nyi)/jointHPercentage+0.2);\n}\nelse if (xi<nxi+jointWPercentage && xi>nxi-jointWPercentage){\ncolor=mix(jointColor,vec3(0.44,0.44,0.44),(xi-nxi)/jointWPercentage+0.2);\n}\nelse {\nfloat t=6.28*brickvUV.x/(tileSize.x+noise(vec2(vUV)*6.0));\nt+=amplitude*turbulence(brickvUV.xy);\nt=sin(t);\ncolor=marble_color(t);\n}\ngl_FragColor=vec4(color,0.0);\n}";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var marbleProceduralTexturePixelShader={name:name,shader:shader}},"./marble/marbleProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"MarbleProceduralTexture",function(){return MarbleProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),MarbleProceduralTexture=(__webpack_require__("./marble/marbleProceduralTexture.fragment.ts"),function(_super){function MarbleProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"marbleProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this._numberOfTilesHeight=3,_this._numberOfTilesWidth=3,_this._amplitude=9,_this._jointColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.72,.72,.72),_this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(MarbleProceduralTexture,_super),MarbleProceduralTexture.prototype.updateShaderUniforms=function(){this.setFloat("numberOfTilesHeight",this._numberOfTilesHeight),this.setFloat("numberOfTilesWidth",this._numberOfTilesWidth),this.setFloat("amplitude",this._amplitude),this.setColor3("jointColor",this._jointColor)},Object.defineProperty(MarbleProceduralTexture.prototype,"numberOfTilesHeight",{get:function(){return this._numberOfTilesHeight},set:function(value){this._numberOfTilesHeight=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(MarbleProceduralTexture.prototype,"amplitude",{get:function(){return this._amplitude},set:function(value){this._amplitude=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(MarbleProceduralTexture.prototype,"numberOfTilesWidth",{get:function(){return this._numberOfTilesWidth},set:function(value){this._numberOfTilesWidth=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(MarbleProceduralTexture.prototype,"jointColor",{get:function(){return this._jointColor},set:function(value){this._jointColor=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),MarbleProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));return serializationObject.customType="BABYLON.MarbleProceduralTexture",serializationObject},MarbleProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new MarbleProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl)},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],MarbleProceduralTexture.prototype,"numberOfTilesHeight",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],MarbleProceduralTexture.prototype,"amplitude",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],MarbleProceduralTexture.prototype,"numberOfTilesWidth",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],MarbleProceduralTexture.prototype,"jointColor",null),MarbleProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.MarbleProceduralTexture"]=MarbleProceduralTexture},"./normalMap/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _normalMapProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./normalMap/normalMapProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"NormalMapProceduralTexture",function(){return _normalMapProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.NormalMapProceduralTexture})},"./normalMap/normalMapProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"normalMapProceduralTexturePixelShader",function(){return normalMapProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="normalMapProceduralTexturePixelShader",shader="precision highp float;\n\nuniform sampler2D baseSampler;\nuniform float size;\n\nvarying vec2 vUV;\n\nconst vec3 LUMA_COEFFICIENT=vec3(0.2126,0.7152,0.0722);\nfloat lumaAtCoord(vec2 coord)\n{\nvec3 pixel=texture2D(baseSampler,coord).rgb;\nfloat luma=dot(pixel,LUMA_COEFFICIENT);\nreturn luma;\n}\nvoid main()\n{\nfloat lumaU0=lumaAtCoord(vUV+vec2(-1.0,0.0)/size);\nfloat lumaU1=lumaAtCoord(vUV+vec2( 1.0,0.0)/size);\nfloat lumaV0=lumaAtCoord(vUV+vec2( 0.0,-1.0)/size);\nfloat lumaV1=lumaAtCoord(vUV+vec2( 0.0,1.0)/size);\nvec2 slope=(vec2(lumaU0-lumaU1,lumaV0-lumaV1)+1.0)*0.5;\ngl_FragColor=vec4(slope,1.0,1.0);\n}\n";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var normalMapProceduralTexturePixelShader={name:name,shader:shader}},"./normalMap/normalMapProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NormalMapProceduralTexture",function(){return NormalMapProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),NormalMapProceduralTexture=(__webpack_require__("./normalMap/normalMapProceduralTexture.fragment.ts"),function(_super){function NormalMapProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"normalMapProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(NormalMapProceduralTexture,_super),NormalMapProceduralTexture.prototype.updateShaderUniforms=function(){this.setTexture("baseSampler",this._baseTexture),this.setFloat("size",this.getRenderSize())},NormalMapProceduralTexture.prototype.render=function(useCameraPostProcess){_super.prototype.render.call(this,useCameraPostProcess)},NormalMapProceduralTexture.prototype.resize=function(size,generateMipMaps){_super.prototype.resize.call(this,size,generateMipMaps),this.updateShaderUniforms()},Object.defineProperty(NormalMapProceduralTexture.prototype,"baseTexture",{get:function(){return this._baseTexture},set:function(texture){this._baseTexture=texture,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),NormalMapProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));return serializationObject.customType="BABYLON.NormalMapProceduralTexture",serializationObject},NormalMapProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new NormalMapProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl)},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serializeAsTexture)()],NormalMapProceduralTexture.prototype,"baseTexture",null),NormalMapProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.NormalMapProceduralTexture"]=NormalMapProceduralTexture},"./perlinNoise/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _perlinNoiseProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./perlinNoise/perlinNoiseProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"PerlinNoiseProceduralTexture",function(){return _perlinNoiseProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.PerlinNoiseProceduralTexture})},"./perlinNoise/perlinNoiseProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"perlinNoiseProceduralTexturePixelShader",function(){return perlinNoiseProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="perlinNoiseProceduralTexturePixelShader",shader="\nprecision highp float;\n\nuniform float size;\nuniform float time;\nuniform float translationSpeed;\n\nvarying vec2 vUV;\n\nfloat r(float n)\n{\nreturn fract(cos(n*89.42)*343.42);\n}\nvec2 r(vec2 n)\n{\nreturn vec2(r(n.x*23.62-300.0+n.y*34.35),r(n.x*45.13+256.0+n.y*38.89));\n}\nfloat worley(vec2 n,float s)\n{\nfloat dis=1.0;\nfor(int x=-1; x<=1; x++)\n{\nfor(int y=-1; y<=1; y++)\n{\nvec2 p=floor(n/s)+vec2(x,y);\nfloat d=length(r(p)+vec2(x,y)-fract(n/s));\nif (dis>d)\ndis=d;\n}\n}\nreturn 1.0-dis;\n}\nvec3 hash33(vec3 p3)\n{\np3=fract(p3*vec3(0.1031,0.11369,0.13787));\np3+=dot(p3,p3.yxz+19.19);\nreturn -1.0+2.0*fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));\n}\nfloat perlinNoise(vec3 p)\n{\nvec3 pi=floor(p);\nvec3 pf=p-pi;\nvec3 w=pf*pf*(3.0-2.0*pf);\nreturn mix(\nmix(\nmix(\ndot(pf-vec3(0,0,0),hash33(pi+vec3(0,0,0))),\ndot(pf-vec3(1,0,0),hash33(pi+vec3(1,0,0))),\nw.x\n),\nmix(\ndot(pf-vec3(0,0,1),hash33(pi+vec3(0,0,1))),\ndot(pf-vec3(1,0,1),hash33(pi+vec3(1,0,1))),\nw.x\n),\nw.z\n),\nmix(\nmix(\ndot(pf-vec3(0,1,0),hash33(pi+vec3(0,1,0))),\ndot(pf-vec3(1,1,0),hash33(pi+vec3(1,1,0))),\nw.x\n),\nmix(\ndot(pf-vec3(0,1,1),hash33(pi+vec3(0,1,1))),\ndot(pf-vec3(1,1,1),hash33(pi+vec3(1,1,1))),\nw.x\n),\nw.z\n),\nw.y\n);\n}\n\nvoid main(void)\n{\nvec2 uv=gl_FragCoord.xy+translationSpeed;\nfloat dis=(\n1.0+perlinNoise(vec3(uv/vec2(size,size),time*0.05)*8.0))\n*(1.0+(worley(uv,32.0)+ 0.5*worley(2.0*uv,32.0)+0.25*worley(4.0*uv,32.0))\n);\ngl_FragColor=vec4(vec3(dis/4.0),1.0);\n}\n";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var perlinNoiseProceduralTexturePixelShader={name:name,shader:shader}},"./perlinNoise/perlinNoiseProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"PerlinNoiseProceduralTexture",function(){return PerlinNoiseProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),PerlinNoiseProceduralTexture=(__webpack_require__("./perlinNoise/perlinNoiseProceduralTexture.fragment.ts"),function(_super){function PerlinNoiseProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"perlinNoiseProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this.time=0,_this.timeScale=1,_this.translationSpeed=1,_this._currentTranslation=0,_this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(PerlinNoiseProceduralTexture,_super),PerlinNoiseProceduralTexture.prototype.updateShaderUniforms=function(){this.setFloat("size",this.getRenderSize());var scene=this.getScene();if(scene){var deltaTime=scene.getEngine().getDeltaTime();this.time+=deltaTime,this.setFloat("time",this.time*this.timeScale/1e3),this._currentTranslation+=deltaTime*this.translationSpeed/1e3,this.setFloat("translationSpeed",this._currentTranslation)}},PerlinNoiseProceduralTexture.prototype.render=function(useCameraPostProcess){this.updateShaderUniforms(),_super.prototype.render.call(this,useCameraPostProcess)},PerlinNoiseProceduralTexture.prototype.resize=function(size,generateMipMaps){_super.prototype.resize.call(this,size,generateMipMaps)},PerlinNoiseProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));return serializationObject.customType="BABYLON.PerlinNoiseProceduralTexture",serializationObject},PerlinNoiseProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new PerlinNoiseProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl)},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],PerlinNoiseProceduralTexture.prototype,"time",void 0),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],PerlinNoiseProceduralTexture.prototype,"timeScale",void 0),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],PerlinNoiseProceduralTexture.prototype,"translationSpeed",void 0),PerlinNoiseProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.PerlinNoiseProceduralTexture"]=PerlinNoiseProceduralTexture},"./road/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _roadProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./road/roadProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"RoadProceduralTexture",function(){return _roadProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.RoadProceduralTexture})},"./road/roadProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"roadProceduralTexturePixelShader",function(){return roadProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="roadProceduralTexturePixelShader",shader="precision highp float;\nvarying vec2 vUV;\nuniform vec3 roadColor;\nfloat rand(vec2 n) {\nreturn fract(cos(dot(n,vec2(12.9898,4.1414)))*43758.5453);\n}\nfloat noise(vec2 n) {\nconst vec2 d=vec2(0.0,1.0);\nvec2 b=floor(n),f=smoothstep(vec2(0.0),vec2(1.0),fract(n));\nreturn mix(mix(rand(b),rand(b+d.yx),f.x),mix(rand(b+d.xy),rand(b+d.yy),f.x),f.y);\n}\nfloat fbm(vec2 n) {\nfloat total=0.0,amplitude=1.0;\nfor (int i=0; i<4; i++) {\ntotal+=noise(n)*amplitude;\nn+=n;\namplitude*=0.5;\n}\nreturn total;\n}\nvoid main(void) {\nfloat ratioy=mod(gl_FragCoord.y*100.0 ,fbm(vUV*2.0));\nvec3 color=roadColor*ratioy;\ngl_FragColor=vec4(color,1.0);\n}";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var roadProceduralTexturePixelShader={name:name,shader:shader}},"./road/roadProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"RoadProceduralTexture",function(){return RoadProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),RoadProceduralTexture=(__webpack_require__("./road/roadProceduralTexture.fragment.ts"),function(_super){function RoadProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"roadProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this._roadColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.53,.53,.53),_this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(RoadProceduralTexture,_super),RoadProceduralTexture.prototype.updateShaderUniforms=function(){this.setColor3("roadColor",this._roadColor)},Object.defineProperty(RoadProceduralTexture.prototype,"roadColor",{get:function(){return this._roadColor},set:function(value){this._roadColor=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),RoadProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));return serializationObject.customType="BABYLON.RoadProceduralTexture",serializationObject},RoadProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new RoadProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl)},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serializeAsColor3)()],RoadProceduralTexture.prototype,"roadColor",null),RoadProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.RoadProceduralTexture"]=RoadProceduralTexture},"./starfield/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _starfieldProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./starfield/starfieldProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"StarfieldProceduralTexture",function(){return _starfieldProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.StarfieldProceduralTexture})},"./starfield/starfieldProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"starfieldProceduralTexturePixelShader",function(){return starfieldProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="starfieldProceduralTexturePixelShader",shader="precision highp float;\n\n#define volsteps 20\n#define iterations 15\nvarying vec2 vPosition;\nvarying vec2 vUV;\nuniform float time;\nuniform float alpha;\nuniform float beta;\nuniform float zoom;\nuniform float formuparam;\nuniform float stepsize;\nuniform float tile;\nuniform float brightness;\nuniform float darkmatter;\nuniform float distfading;\nuniform float saturation;\nvoid main()\n{\nvec3 dir=vec3(vUV*zoom,1.);\nfloat localTime=time*0.0001;\n\nmat2 rot1=mat2(cos(alpha),sin(alpha),-sin(alpha),cos(alpha));\nmat2 rot2=mat2(cos(beta),sin(beta),-sin(beta),cos(beta));\ndir.xz*=rot1;\ndir.xy*=rot2;\nvec3 from=vec3(1.,.5,0.5);\nfrom+=vec3(-2.,localTime*2.,localTime);\nfrom.xz*=rot1;\nfrom.xy*=rot2;\n\nfloat s=0.1,fade=1.;\nvec3 v=vec3(0.);\nfor (int r=0; r<volsteps; r++) {\nvec3 p=from+s*dir*.5;\np=abs(vec3(tile)-mod(p,vec3(tile*2.)));\nfloat pa,a=pa=0.;\nfor (int i=0; i<iterations; i++) {\np=abs(p)/dot(p,p)-formuparam;\na+=abs(length(p)-pa);\npa=length(p);\n}\nfloat dm=max(0.,darkmatter-a*a*.001);\na*=a*a;\nif (r>6) fade*=1.-dm;\n\nv+=fade;\nv+=vec3(s,s*s,s*s*s*s)*a*brightness*fade;\nfade*=distfading;\ns+=stepsize;\n}\nv=mix(vec3(length(v)),v,saturation);\ngl_FragColor=vec4(v*.01,1.);\n}";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var starfieldProceduralTexturePixelShader={name:name,shader:shader}},"./starfield/starfieldProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"StarfieldProceduralTexture",function(){return StarfieldProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),StarfieldProceduralTexture=(__webpack_require__("./starfield/starfieldProceduralTexture.fragment.ts"),function(_super){function StarfieldProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"starfieldProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this._time=1,_this._alpha=.5,_this._beta=.8,_this._zoom=.8,_this._formuparam=.53,_this._stepsize=.1,_this._tile=.85,_this._brightness=.0015,_this._darkmatter=.4,_this._distfading=.73,_this._saturation=.85,_this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(StarfieldProceduralTexture,_super),StarfieldProceduralTexture.prototype.updateShaderUniforms=function(){this.setFloat("time",this._time),this.setFloat("alpha",this._alpha),this.setFloat("beta",this._beta),this.setFloat("zoom",this._zoom),this.setFloat("formuparam",this._formuparam),this.setFloat("stepsize",this._stepsize),this.setFloat("tile",this._tile),this.setFloat("brightness",this._brightness),this.setFloat("darkmatter",this._darkmatter),this.setFloat("distfading",this._distfading),this.setFloat("saturation",this._saturation)},Object.defineProperty(StarfieldProceduralTexture.prototype,"time",{get:function(){return this._time},set:function(value){this._time=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"alpha",{get:function(){return this._alpha},set:function(value){this._alpha=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"beta",{get:function(){return this._beta},set:function(value){this._beta=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"formuparam",{get:function(){return this._formuparam},set:function(value){this._formuparam=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"stepsize",{get:function(){return this._stepsize},set:function(value){this._stepsize=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"zoom",{get:function(){return this._zoom},set:function(value){this._zoom=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"tile",{get:function(){return this._tile},set:function(value){this._tile=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"brightness",{get:function(){return this._brightness},set:function(value){this._brightness=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"darkmatter",{get:function(){return this._darkmatter},set:function(value){this._darkmatter=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"distfading",{get:function(){return this._distfading},set:function(value){this._distfading=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(StarfieldProceduralTexture.prototype,"saturation",{get:function(){return this._saturation},set:function(value){this._saturation=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),StarfieldProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));return serializationObject.customType="BABYLON.StarfieldProceduralTexture",serializationObject},StarfieldProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new StarfieldProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl)},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"time",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"alpha",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"beta",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"formuparam",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"stepsize",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"zoom",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"tile",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"brightness",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"darkmatter",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"distfading",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],StarfieldProceduralTexture.prototype,"saturation",null),StarfieldProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.StarfieldProceduralTexture"]=StarfieldProceduralTexture},"./wood/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _woodProceduralTexture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./wood/woodProceduralTexture.ts");__webpack_require__.d(__webpack_exports__,"WoodProceduralTexture",function(){return _woodProceduralTexture__WEBPACK_IMPORTED_MODULE_0__.WoodProceduralTexture})},"./wood/woodProceduralTexture.fragment.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"woodProceduralTexturePixelShader",function(){return woodProceduralTexturePixelShader});var babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators"),name="woodProceduralTexturePixelShader",shader="precision highp float;\nvarying vec2 vPosition;\nvarying vec2 vUV;\nuniform float ampScale;\nuniform vec3 woodColor;\nfloat rand(vec2 n) {\nreturn fract(cos(dot(n,vec2(12.9898,4.1414)))*43758.5453);\n}\nfloat noise(vec2 n) {\nconst vec2 d=vec2(0.0,1.0);\nvec2 b=floor(n),f=smoothstep(vec2(0.0),vec2(1.0),fract(n));\nreturn mix(mix(rand(b),rand(b+d.yx),f.x),mix(rand(b+d.xy),rand(b+d.yy),f.x),f.y);\n}\nfloat fbm(vec2 n) {\nfloat total=0.0,amplitude=1.0;\nfor (int i=0; i<4; i++) {\ntotal+=noise(n)*amplitude;\nn+=n;\namplitude*=0.5;\n}\nreturn total;\n}\nvoid main(void) {\nfloat ratioy=mod(vUV.x*ampScale,2.0+fbm(vUV*0.8));\nvec3 wood=woodColor*ratioy;\ngl_FragColor=vec4(wood,1.0);\n}";babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[name]=shader;var woodProceduralTexturePixelShader={name:name,shader:shader}},"./wood/woodProceduralTexture.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WoodProceduralTexture",function(){return WoodProceduralTexture});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/tslib/tslib.es6.js"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("babylonjs/Misc/decorators"),WoodProceduralTexture=(__webpack_require__("./wood/woodProceduralTexture.fragment.ts"),function(_super){function WoodProceduralTexture(name,size,scene,fallbackTexture,generateMipMaps){var _this=_super.call(this,name,size,"woodProceduralTexture",scene,fallbackTexture,generateMipMaps)||this;return _this._ampScale=100,_this._woodColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.Color3(.32,.17,.09),_this.updateShaderUniforms(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(WoodProceduralTexture,_super),WoodProceduralTexture.prototype.updateShaderUniforms=function(){this.setFloat("ampScale",this._ampScale),this.setColor3("woodColor",this._woodColor)},Object.defineProperty(WoodProceduralTexture.prototype,"ampScale",{get:function(){return this._ampScale},set:function(value){this._ampScale=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),Object.defineProperty(WoodProceduralTexture.prototype,"woodColor",{get:function(){return this._woodColor},set:function(value){this._woodColor=value,this.updateShaderUniforms()},enumerable:!0,configurable:!0}),WoodProceduralTexture.prototype.serialize=function(){var serializationObject=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Serialize(this,_super.prototype.serialize.call(this));return serializationObject.customType="BABYLON.WoodProceduralTexture",serializationObject},WoodProceduralTexture.Parse=function(parsedTexture,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.SerializationHelper.Parse(function(){return new WoodProceduralTexture(parsedTexture.name,parsedTexture._size,scene,void 0,parsedTexture._generateMipMaps)},parsedTexture,scene,rootUrl)},tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serialize)()],WoodProceduralTexture.prototype,"ampScale",null),tslib__WEBPACK_IMPORTED_MODULE_0__.__decorate([Object(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.serializeAsColor3)()],WoodProceduralTexture.prototype,"woodColor",null),WoodProceduralTexture}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__.ProceduralTexture));babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_1__._TypeStore.RegisteredTypes["BABYLON.WoodProceduralTexture"]=WoodProceduralTexture},"babylonjs/Misc/decorators":function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_babylonjs_Misc_decorators__}})}),$__System.registerDynamic("10",["d","11","12","13","f","14","15","16","17"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var BABYLON=$__require("d"),POSTPROCESS=$__require("11"),MATERIALS=$__require("12"),LOADERS=$__require("13"),PROCEDURALTEXTURES=$__require("f"),GUI=$__require("14"),CANNON=$__require("15"),EARCUT=$__require("16"),code_1=$__require("17");exports.defineRequire=function(){window.require||(window.require=function(name){return exports.editorRequire(name)})},exports.editorRequire=function(moduleName){switch(moduleName){case"babylonjs":return BABYLON;case"babylonjs-procedural-textures":return PROCEDURALTEXTURES;case"babylonjs-loaders":return LOADERS;case"babylonjs-materials":return MATERIALS;case"babylonjs-post-process":return POSTPROCESS;case"babylonjs-gui":return GUI;case"cannon":return CANNON;case"earcut":return EARCUT;default:var ctor=EDITOR.BehaviorCode.Constructors[moduleName];if(ctor){for(var args=new Array(ctor.length),i=0;i<args.length;i++)args[i]=exports.editorRequire;return ctor.apply(ctor,args)}if(ctor=EDITOR.BehaviorCode.Constructors[moduleName.replace(/ /g,"")])return ctor.apply(new Array(ctor.length).map(function(_){return exports.editorRequire}));var code=code_1.default.Instance.datas.scripts.find(function(s){return s.name===moduleName});if(!code)throw new Error('Cannot find custom module named "'+moduleName+'"');return ctor=code_1.default.Instance.getConstructor(code,null),ctor.default=ctor,ctor}}}),$__System.registerDynamic("18",[],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var Extension=function(){function Extension(scene){this.alwaysApply=!1,this.scene=scene}return Extension.AddScript=function(code,url){var script=document.createElement("script");return script.type="text/javascript",script.text=code+"\n//# sourceURL="+url+"\n",document.head.appendChild(script),script},Extension}();exports.default=Extension}),$__System.registerDynamic("17",["d","b","c","10","e","18"],!0,function($__require,exports,module){"use strict";var __extends=(this||self,exports&&exports.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),__awaiter=exports&&exports.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=exports&&exports.__generator||function(thisArg,body){function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g};Object.defineProperty(exports,"__esModule",{value:!0});var EDITOR,babylonjs_1=$__require("d"),tokenizer_1=$__require("b"),tools_1=$__require("c"),require_1=$__require("10"),extensions_1=$__require("e"),extension_1=$__require("18"),template="\nEDITOR.BehaviorCode.Constructors['{{name}}'] = function (scene, {{node}}, tools, mobile, require) {\nvar returnValue = null;\nvar exports = { };\n\n{{code}}\n"+tools_1.exportScriptString+"\n}\n";!function(EDITOR){var BehaviorCode=function(){function BehaviorCode(){}return BehaviorCode.Constructors={},BehaviorCode}();EDITOR.BehaviorCode=BehaviorCode}(EDITOR=exports.EDITOR||(exports.EDITOR={})),window.EDITOR=window.EDITOR||{},window.EDITOR.BehaviorCode=EDITOR.BehaviorCode;var CodeExtension=function(_super){function CodeExtension(scene){var _this=_super.call(this,scene)||this;return _this.id="behavior-editor",_this.assetsCaption="Scripts",_this.instances={},_this.scriptsConstructors={},_this.objectsInstances={},_this.datas=null,CodeExtension.Instance=_this,_this}return __extends(CodeExtension,_super),CodeExtension.prototype.onCreateAsset=function(name){return __awaiter(this,void 0,void 0,function(){var code,asset;return __generator(this,function(_a){switch(_a.label){case 0:return[4,new Promise(function(resolve){babylonjs_1.Tools.LoadFile("assets/templates/code/custom-code-typescript.ts",function(data){return resolve(data)})})];case 1:return code=_a.sent(),asset={name:name,data:{code:code.replace(/{{name}}/g,(name[0].toUpperCase()+name.substr(1,name.length)).replace(/ /g,"")),id:babylonjs_1.Tools.RandomId(),name:name}},this.scene.metadata=this.scene.metadata||{},this.scene.metadata.behaviorScripts=this.scene.metadata.behaviorScripts||[],this.scene.metadata.behaviorScripts.push(asset.data),[2,asset]}})})},CodeExtension.prototype.onRenameAsset=function(asset,name){asset.data.name=name},CodeExtension.prototype.onGetAssets=function(){var data=this.onSerialize(),attached=[],unAttached=[];return data.scripts.forEach(function(s){if(data.nodes.find(function(n){return void 0!==n.metadatas.find(function(m){return m.codeId===s.id})}))return attached.push({name:s.name,data:s});unAttached.push({name:s.name,data:s})}),[{separator:"Attached"}].concat(attached).concat([{separator:"Unattached"}]).concat(unAttached)},CodeExtension.prototype.onDragAndDropAsset=function(targetMesh,asset){targetMesh.metadata=targetMesh.metadata||{},targetMesh.metadata.behavior||(targetMesh.metadata.behavior={node:targetMesh.name,metadatas:[]}),targetMesh.metadata.behavior.metadatas.push({codeId:asset.data.id,active:!0})},CodeExtension.prototype.onRemoveAsset=function(asset){var data=asset.data,remove=function(objects){objects.forEach(function(o){if(o.metadata&&o.metadata.behavior)for(var codes=o.metadata.behavior,links=codes.metadatas,i=0;i<links.length;i++)links[i].codeId===data.id&&(links.splice(i,1),i--)})};remove(this.scene.meshes),remove(this.scene.lights),remove(this.scene.cameras),remove([this.scene]),remove(this.scene.particleSystems);var index=this.scene.metadata.behaviorScripts.indexOf(data);-1!==index&&this.scene.metadata.behaviorScripts.splice(index,1)},CodeExtension.prototype.onAddAsset=function(asset){this.scene.metadata.behaviorScripts.push(asset.data)},CodeExtension.prototype.onApply=function(data){var _this=this;this.datas=data,this.datas.scripts.forEach(function(s){if(!EDITOR.BehaviorCode.Constructors[s.name.replace(/ /g,"")]){if(!_this.datas.nodes.find(function(n){return void 0!==n.metadatas.find(function(m){return m.codeId===s.id})})){var ctor=_this.getConstructor(s,null);_this.scriptsConstructors[s.name]=ctor}}}),this.datas.nodes.forEach(function(d){var node="Scene"===d.node?_this.scene:_this.scene.getNodeByID(d.nodeId)||_this.scene.getNodeByName(d.node);node||_this.scene.particleSystems.forEach(function(ps){return ps.name===d.node&&(node=ps)}),node||(node=_this.scene.getParticleSystemByID(d.nodeId)),node&&d.metadatas.forEach(function(m){if(m.active){var code=_this.datas.scripts.find(function(s){return s.id===m.codeId}),ctor=_this.getConstructor(code,node);if(!ctor.ctor&&"function"!=typeof ctor){var nodeName=node instanceof babylonjs_1.Scene?"Scene":node.name;return babylonjs_1.Tools.Warn('Script named "'+code.name+'" has been ignored on object "'+nodeName+'" as there is no exported script. Please use "exportScript(ctor);"')}var instance=new(ctor.ctor||ctor)(node,_this.scene);m.params&&_this.setCustomParams(m,instance),_this.instances[(node instanceof babylonjs_1.Scene?"scene":node.name)+code.name]=instance;var id=node instanceof babylonjs_1.Scene?"Scene":node.id;_this.objectsInstances[id]||(_this.objectsInstances[id]=[]),_this.objectsInstances[id].push(instance);var scope=_this;instance.start&&_this.scene.registerBeforeRender(function(){instance.start(),scope.scene.unregisterBeforeRender(this.callback)}),instance.update&&_this.scene.registerBeforeRender(function(){instance.update()}),instance.dispose&&node.onDisposeObservable&&node.onDisposeObservable.add(function(){instance.dispose()})}})})},CodeExtension.prototype.onSerialize=function(){var result={scripts:this.scene.metadata?this.scene.metadata.behaviorScripts||[]:[],nodes:[]},add=function(objects){objects.forEach(function(o){if(o.metadata&&o.metadata.behavior){var behavior=o.metadata.behavior;behavior.node=o instanceof babylonjs_1.Scene?"Scene":o instanceof babylonjs_1.Node?o.name:o.id,behavior.nodeId=o instanceof babylonjs_1.Scene?"Scene":o.id,result.nodes.push(behavior)}})};return add(this.scene.meshes),add(this.scene.lights),add(this.scene.cameras),add([this.scene]),add(this.scene.particleSystems),result},CodeExtension.prototype.onLoad=function(data){var _this=this;if(!data.scripts){var oldData=data;data={scripts:[],nodes:[]},oldData.forEach(function(od){var node={node:od.node,nodeId:od.node,metadatas:[]};od.metadatas.forEach(function(m){var id=babylonjs_1.Tools.RandomId();m.link||(data.scripts.push({name:m.name,id:id,code:m.code,compiledCode:m.compiledCode}),node.metadatas.push({codeId:id,active:m.active,params:m.params}))}),data.nodes.push(node)})}this.datas=data,this.scene.metadata=this.scene.metadata||{},this.scene.metadata.behaviorScripts=this.datas.scripts,this.datas.nodes.forEach(function(d){var node="Scene"===d.node?_this.scene:_this.scene.getNodeByID(d.nodeId)||_this.scene.getNodeByName(d.node);node||(node=_this.scene.getParticleSystemByID(d.node)),node&&(d.metadatas.forEach(function(m){}),node.metadata=node.metadata||{},node.metadata.behavior=d)})},CodeExtension.prototype.setCustomParams=function(m,instance){for(var p in m.params){var param=m.params[p];void 0!==param.w?instance[p]=new babylonjs_1.Vector4(param.x,param.y,param.z,param.w):void 0!==param.z?instance[p]=new babylonjs_1.Vector3(param.x,param.y,param.z):void 0!==param.y?instance[p]=new babylonjs_1.Vector2(param.x,param.y):void 0!==param.a?instance[p]=new babylonjs_1.Color4(param.r,param.g,param.b,param.a):void 0!==param.b?instance[p]=new babylonjs_1.Color3(param.r,param.g,param.b):instance[p]=m.params[p]}},CodeExtension.prototype.getConstructor=function(code,node,evaluate){var url=window.location.href;url=url.replace(babylonjs_1.Tools.GetFilename(url),"")+"behaviors/",url+=node?(node instanceof babylonjs_1.Scene?"scene/":node.name.replace(/ /g,"")+"/")+code.name.replace(/ /g,"")+".js":code.name+".js";var fnName=node?(node instanceof babylonjs_1.Scene?"scene":node.name.replace(/ /g,""))+code.name.replace(/ /g,""):code.name.replace(/ /g,""),effectiveCode=template.replace(/{{name}}/g,fnName).replace(/{{class}}/g,node?node.constructor.name:"").replace(/{{node}}/g,this._getEffectiveConstructorName(node)).replace(/{{code}}/g,code.compiledCode||code.code);return evaluate?new Function(effectiveCode)():extension_1.default.AddScript(effectiveCode,url),EDITOR.BehaviorCode.Constructors[fnName](this.scene,node,extensions_1.default.Tools,extensions_1.default.Mobile,require_1.editorRequire)},CodeExtension.prototype.getConstructorName=function(obj){var tokenizer=new tokenizer_1.default(obj.toString());return tokenizer.matchIdentifier("function")||tokenizer.token===tokenizer_1.TokenType.IDENTIFIER?tokenizer.identifier:"Unknown Constructor Name"},CodeExtension.prototype.getFinalTypeScriptCode=function(code,node){var fnName=(node instanceof babylonjs_1.Scene?"scene":node.name.replace(/ /g,""))+code.name.replace(/ /g,"");return template.replace("{{name}}",fnName).replace("{{node}}",this._getEffectiveConstructorName(node)).replace("{{code}}",code.code)},CodeExtension.prototype._getEffectiveConstructorName=function(obj){if(obj instanceof babylonjs_1.DirectionalLight)return"dirlight";if(obj instanceof babylonjs_1.HemisphericLight)return"hemlight";if(obj instanceof babylonjs_1.GroundMesh||obj instanceof babylonjs_1.InstancedMesh)return"mesh";var ctrName=obj&&obj.constructor?obj.constructor.name:"";return""===ctrName&&(ctrName=typeof obj),ctrName.toLowerCase()},CodeExtension.prototype._getFunctionParameters=function(fn){var tokenizer=new tokenizer_1.default(fn.toString()),result=[];if(!tokenizer.matchIdentifier("function")||!tokenizer.match(tokenizer_1.TokenType.IDENTIFIER)||!tokenizer.match(tokenizer_1.TokenType.PARENTHESIS))return[];for(;!tokenizer.match(tokenizer_1.TokenType.PARENTHESIS)&&(result.push(tokenizer.identifier),tokenizer.getNextToken(),tokenizer.match(tokenizer_1.TokenType.COMMA)););return result},CodeExtension.Instance=null,CodeExtension.CurrentDatas=null,CodeExtension}(extension_1.default);exports.default=CodeExtension,extensions_1.default.Register("BehaviorExtension",CodeExtension)}),$__System.registerDynamic("19",["d","1a","e"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var babylonjs_1=$__require("d"),babylonjs_editor_1=$__require("1a"),extensions_1=$__require("e"),Helpers=function(){function Helpers(){}return Helpers.UpdateMonacoTypings=function(editor,editedData,onlyNonAttached){void 0===editedData&&(editedData=null),void 0===onlyNonAttached&&(onlyNonAttached=!1);var scripts=editor.core.scene.metadata.behaviorScripts,extension=extensions_1.default.RequestExtension(editor.core.scene,"BehaviorExtension");if(scripts&&extension){var datas_1=extension.onSerialize();for(var k in babylonjs_editor_1.CodeEditor.CustomLibs){babylonjs_editor_1.CodeEditor.CustomLibs[k].dispose()}babylonjs_editor_1.CodeEditor.CustomLibs={},scripts.forEach(function(s){if(s!==editedData){if(onlyNonAttached){if(datas_1.nodes.find(function(n){return void 0!==n.metadatas.find(function(m){return m.codeId===s.id})}))return}var code='declare module "'+s.name+'" {'+s.code+"}";babylonjs_editor_1.CodeEditor.CustomLibs[s.name]=window.monaco.languages.typescript.typescriptDefaults.addExtraLib(code,s.name)}})}},Helpers.GetSceneMetadatas=function(scene){return scene.metadata=scene.metadata||{},scene.metadata},Helpers.CreatePreview=function(canvas){var engine=new babylonjs_1.Engine(canvas),scene=new babylonjs_1.Scene(engine),camera=new babylonjs_1.ArcRotateCamera("PreviewCamera",0,0,10,babylonjs_1.Vector3.Zero(),scene,!0);return camera.attachControl(canvas,!0,!1),{engine:engine,scene:scene,camera:camera}},Helpers}();exports.default=Helpers}),$__System.registerDynamic("a",["d","1a","e","17","19"],!0,function($__require,exports,module){"use strict";var __extends=(this||self,exports&&exports.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),__awaiter=exports&&exports.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=exports&&exports.__generator||function(thisArg,body){function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g};Object.defineProperty(exports,"__esModule",{value:!0});var babylonjs_1=$__require("d"),babylonjs_editor_1=$__require("1a"),extensions_1=$__require("e");$__require("17");var helpers_1=$__require("19"),BehaviorCodeEditor=function(_super){function BehaviorCodeEditor(editor,targetNode,targetNodeAddScript,targetNodeSetScript){var _this=_super.call(this,"Code Editor")||this;return _this.editor=editor,_this.layout=null,_this.toolbar=null,_this.grid=null,_this.extension=null,_this.code=null,_this.template="// Some code",_this.node=null,_this.asset=null,_this.datas=null,_this.data=null,_this.onSelectObject=function(node){return node&&_this.selectObject(node)},_this.onSelectAsset=function(asset){return asset&&_this.selectAsset(asset)},_this._timeoutId=-1,_this.targetNode=targetNode,_this.targetNodeAddScript=targetNodeAddScript,_this.targetNodeSetScript=targetNodeSetScript,_this}return __extends(BehaviorCodeEditor,_super),BehaviorCodeEditor.prototype.close=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return this.toolbar.element.destroy(),this.grid.element.destroy(),this.layout.element.destroy(),this.code.dispose(),this.editor.core.onSelectObject.removeCallback(this.onSelectObject),this.editor.core.onSelectAsset.removeCallback(this.onSelectAsset),[4,_super.prototype.close.call(this)];case 1:return _a.sent(),[2]}})})},BehaviorCodeEditor.prototype.create=function(){return __awaiter(this,void 0,void 0,function(){var div,_a,_b,_this=this;return __generator(this,function(_c){switch(_c.label){case 0:return div=$(this.divElement),this.layout=new babylonjs_editor_1.Layout("Code"),this.layout.panels=[{type:"top",content:'<div id="CODE-BEHAVIOR-TOOLBAR"></div>',size:30,resizable:!1},{type:"left",content:'<div id="CODE-BEHAVIOR-LIST" style="width: 100%; height: 100%;"></div>',size:250,overflow:"auto",resizable:!0},{type:"main",content:'<div id="CODE-BEHAVIOR-EDITOR" style="width: 100%; height: 100%; overflow: hidden;"></div>',resizable:!0}],this.layout.build(div.attr("id")),this.layout.lockPanel("left","Loading...",!0),this.toolbar=new babylonjs_editor_1.Toolbar("CodeToolbar"),this.toolbar.items=[{id:"add-new",text:"Attach New Script",caption:"Attach New Script",img:"icon-add"},{id:"add-new-lib",text:"Add New Lib",caption:"Add New Lib",img:"icon-add"},{type:"break"},{id:"import",text:"Import from...",caption:"Import from...",img:"icon-add"},{id:"open-code-editor",text:"Open Code Editor",caption:"Open Code Editor",img:"icon-edit"}],this.toolbar.right="No object selected",this.toolbar.helpUrl="http://doc.babylonjs.com/resources/custom_scripts",this.toolbar.onClick=function(id){return _this.toolbarClicked(id)},this.toolbar.build("CODE-BEHAVIOR-TOOLBAR"),this.grid=new babylonjs_editor_1.Grid("CodeGrid",{toolbarReload:!1,toolbarSearch:!1,toolbarEdit:!1}),this.grid.columns=[{field:"name",caption:"Name",size:"80%",editable:{type:"string"}},{field:"active",caption:"Active",size:"20%",editable:{type:"checkbox"}}],this.grid.onClick=function(id){return _this.selectCode(id[0])},this.grid.onAdd=function(){return _this._importFrom([_this._getSerializedMetadatasFile()])},this.grid.onDelete=function(ids){return _this.delete(ids)},this.grid.onChange=function(id,value){return _this.change(id,value)},this.grid.build("CODE-BEHAVIOR-LIST"),this.layout.lockPanel("main"),_a=this,[4,this.createEditor()];case 1:return _a.code=_c.sent(),_b=this,[4,babylonjs_editor_1.Tools.LoadFile("./assets/templates/code/code-typescript.ts",!1)];case 2:return _b.template=_c.sent(),this.layout.unlockPanel("main"),this.editor.core.onSelectAsset.add(this.onSelectAsset),this.editor.core.onSelectObject.add(this.onSelectObject),this.editor.core.scene.metadata=this.editor.core.scene.metadata||{},this.editor.core.scene.metadata.behaviorScripts=this.editor.core.scene.metadata.behaviorScripts||[],this.extension=extensions_1.default.RequestExtension(this.editor.core.scene,"BehaviorExtension"),this.editor.assets.addTab(this.extension),this.targetNode||this.editor.core.currentSelectedObject?(this.selectObject(this.targetNode||this.editor.core.currentSelectedObject),this.layout.unlockPanel("left")):this.layout.lockPanel("left","No object selected"),this.targetNodeAddScript&&this.add(),this.targetNodeSetScript&&this._importFrom([this._getSerializedMetadatasFile()]),!BehaviorCodeEditor.CodeProjectEditor&&this.node&&this.asset||this.layout.lockPanel("main"),babylonjs_editor_1.VSCodeSocket.OnUpdateBehaviorCode=function(d){return __awaiter(_this,void 0,void 0,function(){var scripts,effective,compiledCode,needsUpdate;return __generator(this,function(_a){switch(_a.label){case 0:return scripts=this.editor.core.scene.metadata.behaviorScripts,effective=scripts.find(function(s){return s.id===d.id}),[4,babylonjs_editor_1.CodeEditor.TranspileTypeScript(d.code,d.name.replace(/ /,""),{module:"cjs",target:"es5",experimentalDecorators:!0})];case 1:return compiledCode=_a.sent(),(needsUpdate=!0,effective)?(needsUpdate=effective.code!==d.code,effective.code=d.code,effective.compiledCode=compiledCode,needsUpdate&&(this.data&&this.data.id===d.id||this.asset&&this.asset.id===d.id)&&this.code.setValue(d.code),[2]):(babylonjs_editor_1.VSCodeSocket.RefreshBehavior(scripts),[2])}})})},[2]}})})},BehaviorCodeEditor.prototype.onShow=function(targetNode,targetNodeAddScript,targetNodeSetScript){this.onResize(),this.targetNode=targetNode,targetNode&&this.selectObject(this.targetNode),targetNodeAddScript&&this.add(),targetNodeSetScript&&this._importFrom([this._getSerializedMetadatasFile()]),BehaviorCodeEditor.CodeProjectEditor&&this.layout.lockPanel("main")},BehaviorCodeEditor.prototype.onResize=function(){this.layout.element.resize()},BehaviorCodeEditor.prototype.toolbarClicked=function(id){return __awaiter(this,void 0,void 0,function(){var _a,asset;return __generator(this,function(_b){switch(_b.label){case 0:switch(_a=id){case"add-new":return[3,1];case"add-new-lib":return[3,3];case"import":return[3,5];case"open-code-editor":return[3,7]}return[3,8];case 1:return[4,this.add()];case 2:return _b.sent(),[3,9];case 3:return[4,this.editor.assets.addAsset(this.extension)];case 4:return asset=_b.sent(),asset&&this.selectAsset(asset.data),[3,9];case 5:return[4,this._importFrom()];case 6:return _b.sent(),[3,9];case 7:return this.editCode(),[3,9];case 8:return[3,9];case 9:return[2]}})})},BehaviorCodeEditor.prototype.selectAsset=function(asset){if(this.node=null,this.asset=asset,!asset)return this.selectObject(null);asset.code&&(this.layout.hidePanel("left"),this.datas={node:"Unknown",nodeId:"Unknown",metadatas:[{active:!0,codeId:asset.id}]},this.selectCode(0),this.layout.unlockPanel("left"),BehaviorCodeEditor.CodeProjectEditor||this.layout.unlockPanel("main"))},BehaviorCodeEditor.prototype.selectObject=function(node){var _this=this;if(!node)return this.layout.lockPanel("left","No object selected"),void this.layout.lockPanel("main");this.node=node,node.metadata=node.metadata||{},this.asset=null,this.datas=node.metadata.behavior,this.datas||(this.datas=node.metadata.behavior={node:node instanceof babylonjs_1.Scene?"Scene":node.name,nodeId:node instanceof babylonjs_1.Scene?"Scene":node.id,metadatas:[]}),this.datas.nodeId||(this.datas.nodeId=node instanceof babylonjs_1.Scene?"Scene":node.id),this.data=null,this.grid.element.clear(),this.code.setValue("");var scripts=this.editor.core.scene.metadata.behaviorScripts;this.datas.metadatas.forEach(function(d,index){var code=scripts.find(function(s){return s.id===d.codeId});_this.grid.addRecord({recid:index,name:code.name,active:d.active})}),this.grid.element.refresh(),this.datas.metadatas.length>0&&(this.selectCode(0),this.grid.select([0])),this.layout.showPanel("left"),this._updateToolbarText(),this.layout.unlockPanel("left"),0===this.datas.metadatas.length?this.layout.lockPanel("main"):BehaviorCodeEditor.CodeProjectEditor||this.layout.unlockPanel("main")},BehaviorCodeEditor.prototype.selectCode=function(index){var _this=this,scripts=this.editor.core.scene.metadata.behaviorScripts;this.data=scripts.find(function(s){return s.id===_this.datas.metadatas[index].codeId}),helpers_1.default.UpdateMonacoTypings(this.editor,this.data),this.code.setValue(this.data.code),this._updateToolbarText()},BehaviorCodeEditor.prototype.add=function(){return __awaiter(this,void 0,void 0,function(){var ctor,name,data,scripts;return __generator(this,function(_a){switch(_a.label){case 0:return ctor="scene",this.node&&(ctor=babylonjs_editor_1.Tools.GetConstructorName(this.node).toLowerCase(),this.node instanceof babylonjs_1.DirectionalLight?ctor="dirlight":this.node instanceof babylonjs_1.HemisphericLight?ctor="hemlight":(this.node instanceof babylonjs_1.GroundMesh||this.node instanceof babylonjs_1.InstancedMesh)&&(ctor="mesh")),[4,babylonjs_editor_1.Dialog.CreateWithTextInput("Script Name")];case 1:return name=_a.sent(),data={name:name,id:babylonjs_1.Tools.RandomId(),code:this.template.replace(/{{name}}/g,(name[0].toUpperCase()+name.substr(1,name.length)).replace(/ /g,"")).replace(/{{type}}/g,ctor).replace(/{{class}}/g,this.node.constructor.name)},scripts=this.editor.core.scene.metadata.behaviorScripts,scripts.push(data),this.node?(this.datas.metadatas.push({active:!0,codeId:data.id}),this.grid.addRow({recid:this.datas.metadatas.length-1,name:data.name,active:!0}),this.grid.selectNone(),this.grid.select([this.datas.metadatas.length-1]),this.selectCode(this.datas.metadatas.length-1),this.editor.graph.configure()):this.selectAsset(data),this.code.focus(),BehaviorCodeEditor.CodeProjectEditor||this.layout.unlockPanel("main"),this.editor.assets.refresh(this.extension.id),[2]}})})},BehaviorCodeEditor.prototype.delete=function(ids){return __awaiter(this,void 0,void 0,function(){var offset,_this=this;return __generator(this,function(_a){return offset=0,ids.forEach(function(id){_this.datas.metadatas.splice(id-offset,1),offset++}),this.editor.assets.refresh(this.extension.id),this.editor.graph.configure(),[2]})})},BehaviorCodeEditor.prototype.change=function(id,value){var _this=this;if("string"==typeof value){this.editor.core.scene.metadata.behaviorScripts.find(function(s){return s.id===_this.datas.metadatas[id].codeId}).name=value,this._updateToolbarText(),this.editor.assets.refresh(this.extension.id)}else this.datas.metadatas[id].active=value},BehaviorCodeEditor.prototype.createEditor=function(parent,data,caller){return __awaiter(this,void 0,void 0,function(){var code,_this=this;return __generator(this,function(_a){switch(_a.label){case 0:return caller=caller||window,code=new babylonjs_editor_1.CodeEditor("typescript",""),[4,code.build(parent||"CODE-BEHAVIOR-EDITOR",caller)];case 1:return _a.sent(),code.onChange=function(value){clearTimeout(_this._timeoutId),_this._timeoutId=setTimeout(function(){if(data||_this.data){var config={module:"cjs",target:"es5",experimentalDecorators:!0};data?data.compiledCode=code.transpileTypeScript(data.code,_this.data.name.replace(/ /,""),config):_this.data&&(_this.data.compiledCode=_this.code.transpileTypeScript(_this.data.code,_this.data.name.replace(/ /,""),config))}},500),data?(data.code=code.getValue(),data===_this.data&&_this.code.setValue(data.code)):_this.data&&(_this.data.code=_this.code.getValue(),babylonjs_editor_1.VSCodeSocket.RefreshBehavior(_this.data))},[2,code]}})})},BehaviorCodeEditor.prototype.editCode=function(){return __awaiter(this,void 0,void 0,function(){var editor,_this=this;return __generator(this,function(_a){switch(_a.label){case 0:return BehaviorCodeEditor.CodeProjectEditor?[2]:[4,babylonjs_editor_1.CodeProjectEditorFactory.Create(this.editor,{name:"Code Editor - Behaviors",scripts:this.editor.core.scene.metadata.behaviorScripts,onOpened:function(){_this.layout.lockPanel("main")},onClose:function(){BehaviorCodeEditor.CodeProjectEditor=null,(_this.node||_this.asset)&&_this.layout.unlockPanel("main")}})];case 1:return editor=_a.sent(),BehaviorCodeEditor.CodeProjectEditor=editor,[2]}})})},BehaviorCodeEditor.prototype._getSerializedMetadatasFile=function(){var result={customMetadatas:{BehaviorExtension:this.extension.onSerialize()}};return babylonjs_editor_1.Tools.CreateFile(babylonjs_editor_1.Tools.ConvertStringToUInt8Array(JSON.stringify(result)),"editorproject")},BehaviorCodeEditor.prototype._updateToolbarText=function(){this.toolbar.element.right="<h2>"+(this.data?this.data.name:"")+'</h2> Attached to "'+(this.node instanceof babylonjs_1.Scene?"Scene":this.node?this.node.name:"")+'"',this.toolbar.element.render()},BehaviorCodeEditor.prototype._importFrom=function(files){return __awaiter(this,void 0,void 0,function(){var importFromFile,_loop_1,this_1,_i,files_1,f,_this=this;return __generator(this,function(_a){switch(_a.label){case 0:return importFromFile=!1,files?[3,2]:(importFromFile=!0,[4,babylonjs_editor_1.Tools.OpenFileDialog()]);case 1:files=_a.sent(),_a.label=2;case 2:_loop_1=function(f){var content,project,metadatas,scripts,picker;return __generator(this,function(_a){switch(_a.label){case 0:return"editorproject"!==babylonjs_editor_1.Tools.GetFileExtension(f.name)?[2,"continue"]:[4,babylonjs_editor_1.Tools.ReadFileAsText(f)];case 1:return content=_a.sent(),(project=JSON.parse(content),project.customMetadatas&&project.customMetadatas.BehaviorExtension)?(metadatas=project.customMetadatas.BehaviorExtension,scripts=this_1.editor.core.scene.metadata.behaviorScripts,picker=new babylonjs_editor_1.Picker("Import Scripts From..."),picker.search=!0,picker.addItems(metadatas.scripts),picker.open(function(items){items.forEach(function(i){var code=importFromFile?metadatas.scripts[i.id]:scripts[i.id],id=importFromFile?babylonjs_1.Tools.RandomId():code.id;importFromFile&&(code.id=id,_this.extension.onAddAsset({data:code,name:code.name})),_this.datas&&_this.datas.metadatas.push({active:!0,codeId:id})}),_this.editor.assets.refresh(_this.extension.id),_this.editor.graph.configure(),_this.selectObject(_this.node)}),[2]):[2,"continue"]}})},this_1=this,_i=0,files_1=files,_a.label=3;case 3:return _i<files_1.length?(f=files_1[_i],[5,_loop_1(f)]):[3,6];case 4:_a.sent(),_a.label=5;case 5:return _i++,[3,3];case 6:return[2]}})})},BehaviorCodeEditor.CodeProjectEditor=null,BehaviorCodeEditor}(babylonjs_editor_1.EditorPlugin);exports.default=BehaviorCodeEditor})})(function(factory){module.exports=factory(require("babylonjs"),require("babylonjs-editor"),require("babylonjs-gui"),require("babylonjs-loaders"),require("babylonjs-materials"),require("babylonjs-post-process"),require("cannon"),require("earcut"),require("extensions/extensions.js"))});